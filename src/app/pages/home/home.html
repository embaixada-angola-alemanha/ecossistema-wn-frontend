<!-- Featured hero — full width -->
@if (featured().length > 0) {
  @let main = featured()[0];
  <section class="hero">
    <a [routerLink]="['/artigo', main.slug]" class="hero__link">
      @if (main.featuredImageId) {
        <img [src]="main.featuredImageId | imageUrl" [alt]="main | localized:'titulo'" class="hero__cover" loading="eager">
      } @else {
        <div class="hero__placeholder"></div>
      }
      <div class="hero__overlay">
        <div class="hero__content">
          @if (main.category) {
            <span class="cat-tag">{{ main.category | localized:'nome' }}</span>
          }
          <h2 class="hero__title">{{ main | localized:'titulo' }}</h2>
          <p class="hero__excerpt">{{ main | localized:'excerto' }}</p>
          <div class="hero__meta">
            @if (main.author) { {{ main.author.nome }} · }
            {{ main.publishedAt | date:'longDate' }}
          </div>
        </div>
      </div>
    </a>
  </section>
}

<!-- Latest articles grid -->
@if (latest().length > 0) {
  <section class="latest">
    <div class="latest__container">
      <div class="articles-label">{{ 'home.latest' | translate }}</div>
      <div class="articles-grid">
        @for (article of latest(); track article.id) {
          <a [routerLink]="['/artigo', article.slug]" class="art-card">
            <div class="art-card__img">
              @if (article.category) {
                <span class="cat-tag" [style.background-color]="article.category.cor || 'var(--ember)'">
                  {{ article.category | localized:'nome' }}
                </span>
              }
              @if (article.featuredImageId) {
                <img [src]="article.featuredImageId | imageUrl" [alt]="article | localized:'titulo'" class="art-card__cover" loading="lazy">
              } @else {
                <div class="art-card__placeholder">
                  <span class="material-icons-outlined">article</span>
                </div>
              }
            </div>
            <div class="art-card__body">
              <h3 class="art-card__title">{{ article | localized:'titulo' }}</h3>
              <p class="art-card__excerpt">{{ article | localized:'excerto' }}</p>
              <div class="art-card__meta">
                @if (article.author) {
                  <span class="art-card__author">{{ article.author.nome }}</span>
                }
                <span class="art-card__date">{{ article.publishedAt | date:'mediumDate' }}</span>
              </div>
            </div>
          </a>
        }
      </div>

      <div class="latest__more">
        <a routerLink="/arquivo" class="btn btn--outline">{{ 'home.view_all' | translate }}</a>
      </div>
    </div>
  </section>
}

<!-- Newsletter signup -->
<wn-newsletter-signup />
